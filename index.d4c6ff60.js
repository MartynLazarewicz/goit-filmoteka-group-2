!function(){var n=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],e=document.querySelector("#tags");var t,a="api_key=d2b5af87a64d923fbc9cd42aa4272fb1",i="https://image.tmdb.org/t/p/w500",o="https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&"+a,c=document.querySelector("#main"),d=document.querySelector("#form"),s=document.querySelector("body"),l=document.getElementById("prev"),m=document.getElementById("current"),r=document.getElementById("next"),u=1,p=2,v=3,g="",_=100;function b(e){g=e,fetch(e).then((function(n){return n.json()})).then((function(e){!function(e){c.innerHTML="",e.forEach((function(e){var t=e.title,a=e.overview,o=e.vote_average,d=e.vote_count,l=e.genre_ids,m=e.popularity,r=e.release_date,u=e.original_title,p=e.id,v=e.poster_path,g=document.createElement("div");g.classList.add("movie");var _,b=n.filter((function(n){return-1!==l.indexOf(n.id)})).map((function(n){return n.name})),f='\n      <button type="button" class="movie__btn" id="'.concat(p,'"><img class="poster-img" src="').concat(v?i+v:"https://i.pinimg.com/originals/d2/92/47/d2924780042a36811b6bd5473465f7fc.jpg",'" alt="image"></button>\n      <div class="movie__info">\n          <div class="info"><h3 class="info__title">').concat(t,'</h3>\n          </div>\n          <div class="info ">\n            <p class="info__genres-and-year">').concat(b.join(", ")," | ").concat(r.slice(0,4),' </p><span class="').concat((_=o,_>=8?"green":_>=4?"orange":"red"),'">').concat(o,"</span>\n          </div>\n                  \n      </div>\n      "),y='\n      <div id="'.concat("modal"+p,'" class="modal">\n        <div class="modal-content">\n          <span id="').concat("close"+p,'"class="close">x</span>\n          <div class="modal-content__sides">\n            \n          <div class="modal-content__img">\n                    <img src="').concat(v?i+v:"https://i.pinimg.com/originals/d2/92/47/d2924780042a36811b6bd5473465f7fc.jpg",'" alt="image"></div>\n\n          <div class="modal-content__right-side">\n          <h2 class="modal-content__title">').concat(t,'</h2>\n          <div class="modal-content__items">\n            <p class="modal-content__items--vote">').concat(o," / ").concat(d,'</p>\n            <p class="modal-content__items--popularity">').concat(Math.round(m).toLocaleString(),'</p>\n            <p class="modal-content__items--title">').concat(u,'</p>\n            <p class="modal-content__items--genre">').concat(b[0],'</p>\n          </div>\n          <h3 class="modal-content__about">About</h3>\n          <p class="modal-content__description">').concat(a,'</p>\n          <div class="modal-content__buttons">\n            <button type="button" class="modal-content__buttons--add-to-watched">ADD TO WATCHED</button>\n            <button type="button" class="modal-content__buttons--add-to-queue">ADD TO QUEUE</button>\n          </div>\n          </div>\n        </div>\n        </div>\n      </div>\n      ');g.innerHTML=f+y,c.appendChild(g),document.getElementById(p).addEventListener("click",(function(){document.getElementById("modal"+p).style.display="block",s.classList.add("noOverFlow")})),document.getElementById("close"+p).addEventListener("click",(function(){document.getElementById("modal"+p).style.display="none",s.classList.remove("noOverFlow")}))}))}(e.results),u=e.page,console.log(u),p=e.page+1,console.log(p),v=e.page-1,_=e.total_pages,m.innerText=u,u<=1?(l.classList.add("disabled"),r.classList.remove("disabled")):u>=_?(l.classList.remove("disabled"),r.classList.add("disabled")):(l.classList.remove("disabled"),r.classList.remove("disabled")),c.scrollIntoView({behavior:"smooth"}),0===e.results.length&&(console.log("ERROR IN SEARCH"),b(o))}))}function f(n){var e=g.split("?"),t=e[1].split("&"),a=t[t.length-1].split("=");if("page"!=a[0]){b(g+"&page="+n)}else{a[1]=n.toString();var i=a.join("=");t[t.length-1]=i;var o=t.join("&");b(e[0]+"?"+o)}}b(o),d.addEventListener("submit",(function(n){n.preventDefault();var e=document.querySelector("input").value;b(e?"https://api.themoviedb.org/3/search/movie?api_key=d2b5af87a64d923fbc9cd42aa4272fb1&query="+e:o)})),t=[],e.innerHTML="",n.forEach((function(n){var a=document.createElement("div");a.classList.add("tag"),a.id=n.id,a.innerText=n.name,a.addEventListener("click",(function(){0===t.length?t.push(n.id):(t.splice(0,t.length),a.click()),b(o+"&with_genres="+encodeURI(t.join(",")))})),e.append(a)})),l.addEventListener("click",(function(){v>0&&f(v)})),r.addEventListener("click",(function(){p<=_&&f(p)}))}();
//# sourceMappingURL=index.d4c6ff60.js.map
