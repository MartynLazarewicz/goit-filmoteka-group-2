{"mappings":"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","sources":["src/js/genres.js","src/js/main.js"],"sourcesContent":["export const genre = [\n  {\n    id: 28,\n    name: 'Action',\n  },\n  {\n    id: 12,\n    name: 'Adventure',\n  },\n  {\n    id: 16,\n    name: 'Animation',\n  },\n  {\n    id: 35,\n    name: 'Comedy',\n  },\n  {\n    id: 80,\n    name: 'Crime',\n  },\n  {\n    id: 99,\n    name: 'Documentary',\n  },\n  {\n    id: 18,\n    name: 'Drama',\n  },\n  {\n    id: 10751,\n    name: 'Family',\n  },\n  {\n    id: 14,\n    name: 'Fantasy',\n  },\n  {\n    id: 36,\n    name: 'History',\n  },\n  {\n    id: 27,\n    name: 'Horror',\n  },\n  {\n    id: 10402,\n    name: 'Music',\n  },\n  {\n    id: 9648,\n    name: 'Mystery',\n  },\n  {\n    id: 10749,\n    name: 'Romance',\n  },\n  {\n    id: 878,\n    name: 'Science Fiction',\n  },\n  {\n    id: 10770,\n    name: 'TV Movie',\n  },\n  {\n    id: 53,\n    name: 'Thriller',\n  },\n  {\n    id: 10752,\n    name: 'War',\n  },\n  {\n    id: 37,\n    name: 'Western',\n  },\n];\n","// import Notiflix from 'notiflix';\n// import 'notiflix/dist/notiflix-3.2.5.min.css';\n\n\n// import { tags, setGenre } from './fn-genres.js';\n// import { genresToggle } from './genres-btn.js';\nimport { genre } from './genres.js';\n\nconst API_KEY = 'api_key=d2b5af87a64d923fbc9cd42aa4272fb1';\nconst BASE_URL = 'https://api.themoviedb.org/3';\nconst ALL_URL = '/discover/movie?sort_by=popularity.desc&';\nconst IMG_URL = 'https://image.tmdb.org/t/p/w500';\nconst QUERY = '&query=';\nexport const API_URL = BASE_URL + ALL_URL + API_KEY;\n\nconst searchURL = BASE_URL + '/search/movie?' + API_KEY;\n\nconst main = document.querySelector('#main');\nconst form = document.querySelector('#form');\n\n// Pagination elements\n\nlet prev = document.querySelector('#prev');\nlet current = document.querySelector('#current');\nlet next = document.querySelector('#next');\n\nlet currentPage = 1;\nlet nextPage = 2;\nlet prevPage = 3;\nlet lastUrl = '';\nlet totalPages = 100;\n\n// API query\n\ngetMovies(API_URL);\n\nexport function getMovies(url) {\n  lastUrl = url;\n  fetch(url)\n    .then(res => res.json())\n    .then(data => {\n      showMovies(data.results);\n\n      currentPage = data.page;\n      console.log(currentPage);\n      nextPage = data.page + 1;\n      console.log(nextPage);\n      prevPage = data.page - 1;\n      totalPages = data.total_pages;\n\n      current.innerText = currentPage;\n\n      if (currentPage <= 1) {\n        prev.classList.add('disabled');\n        next.classList.remove('disabled');\n      } else if (currentPage >= totalPages) {\n        prev.classList.remove('disabled');\n        next.classList.add('disabled');\n      } else {\n        prev.classList.remove('disabled');\n        next.classList.remove('disabled');\n      }\n      main.scrollIntoView({ behavior: 'smooth' });\n\n      // if (data.results.length === 0) {\n      //   console.log('ERROR IN SEARCH');\n      //   getMovies(API_URL);\n      // }\n\n      // if (data.results.length === 0) {\n      //   Notiflix.Notify.failure(\n      //     'Sorry, there are no images matching your search query. Please try again.'\n      //   );\n      //   getMovies(API_URL);\n      // }\n    });\n}\n\nexport function showMovies(data) {\n  main.innerHTML = '';\n  data.forEach(movie => {\n    const {\n      title,\n      overview,\n      vote_average,\n      vote_count,\n      genre_ids,\n      popularity,\n      release_date,\n      original_title,\n      id,\n      poster_path,\n    } = movie;\n\n    const movieEl = document.createElement('div');\n\n    movieEl.classList.add('movie');\n\n    let genreArrayOfObj = genre.filter(function (g) {\n      return genre_ids.indexOf(g.id) !== -1;\n    });\n\n    const genreNames = genreArrayOfObj.map(a => a.name);\n\n    const movieBox = `\n      <button type=\"button\" class=\"movie__btn\" id=\"${id}\"><img class=\"poster-img\" src=\"${\n      poster_path\n        ? IMG_URL + poster_path\n        : 'https://i.pinimg.com/originals/d2/92/47/d2924780042a36811b6bd5473465f7fc.jpg'\n    }\" alt=\"image\"></button>\n      <div class=\"movie__info\">\n          <div class=\"info\"><h3 class=\"info__title\">${title}</h3>\n          </div>\n          <div class=\"info \">\n            <p class=\"info__genres-and-year\">${genreNames.join(\n              ', '\n            )} | ${release_date.slice(0, 4)} </p><span class=\"${getColor(\n      vote_average\n    )}\">${vote_average}</span>\n          </div>\n                  \n      </div>\n      `;\n\n    const modal = `\n      <div id=\"${'modal' + id}\" class=\"modal\">\n        <div class=\"modal-content\">\n          <span id=\"${'close' + id}\" class=\"close\">x</span>\n          <div class=\"modal-content__sides\">\n            \n          <div class=\"modal-content__img\">\n                    <img src=\"${\n                      poster_path\n                        ? IMG_URL + poster_path\n                        : 'https://i.pinimg.com/originals/d2/92/47/d2924780042a36811b6bd5473465f7fc.jpg'\n                    }\" alt=\"image\"></div>\n\n          <div class=\"modal-content__right-side\">\n          <h2 class=\"modal-content__title\">${title}</h2>\n          <div class=\"modal-content__items\">\n            <p class=\"modal-content__items--vote\">${vote_average} / ${vote_count}</p>\n            <p class=\"modal-content__items--popularity\">${Math.round(\n              popularity\n            ).toLocaleString()}</p>\n            <p class=\"modal-content__items--title\">${original_title}</p>\n            <p class=\"modal-content__items--genre\">${genreNames[0]}</p>\n          </div>\n          <h3 class=\"modal-content__about\">About</h3>\n          <p class=\"modal-content__description\">${overview}</p>\n          <div class=\"modal-content__buttons\">\n            <button type=\"button\" class=\"modal-content__buttons--add-to-watched\">ADD TO WATCHED</button>\n            <button type=\"button\" class=\"modal-content__buttons--add-to-queue\">ADD TO QUEUE</button>\n          </div>\n          </div>\n        </div>\n        </div>\n      </div>\n      `;\n\n    movieEl.innerHTML = movieBox + modal;\n    main.appendChild(movieEl);\n\n    document.getElementById(id).addEventListener('click', () => {\n      document.getElementById('modal' + id).style.display = 'block';\n      document.querySelector('body').style.overflow = 'hidden';\n    });\n\n    document.getElementById('close' + id).addEventListener('click', () => {\n      document.getElementById('modal' + id).style.display = 'none';\n      document.querySelector('body').style.overflow = 'visible';\n    });\n\n    //  Local Storage\n\n    const btnAddToWatched = document.querySelector(\n      `#modal${id} .modal-content__buttons--add-to-watched`\n    );\n\n    btnAddToWatched.addEventListener('click', () => {\n      addMovieToLibrary('libraryWatched', movie);\n    });\n\n    const btnAddToQueue = document.querySelector(\n      `#modal${id} .modal-content__buttons--add-to-queue`\n    );\n\n    btnAddToQueue.addEventListener('click', () => {\n      addMovieToLibrary('libraryQueue', movie);\n    });\n  });\n}\n\n// Vote colors\n\nfunction getColor(vote) {\n  if (vote >= 8) {\n    return 'green';\n  } else if (vote >= 4) {\n    return 'orange';\n  } else {\n    return 'red';\n  }\n}\n\n// Search by keyword\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  const searchTerm = document.querySelector('input').value;\n  pageCall(prevPage);\n  if (searchTerm) {\n    getMovies(searchURL + QUERY + searchTerm);\n  } else {\n    getMovies(API_URL);\n  }\n});\n\n// Genres\n\n// setGenre();\n\n// const genresBtn = document.querySelector('.genres-button');\n// genresBtn.addEventListener('click', genresToggle);\n\n// Pagination\n\nprev.addEventListener('click', () => {\n  if (prevPage > 0) {\n    pageCall(current);\n  }\n});\n\nnext.addEventListener('click', () => {\n  if (nextPage <= totalPages) {\n    pageCall(nextPage);\n  }\n});\n\nfunction pageCall(page) {\n  let urlSplit = lastUrl.split('?');\n  let queryParams = urlSplit[1].split('?');\n  let key = queryParams[queryParams.length - 1].split('=');\n  if (key[0] !== 'page') {\n    let url = lastUrl + '&page=' + page;\n    getMovies(url);\n  } else {\n    key[1] = page.toString();\n    let a = key.join('=');\n    queryParams[queryParams.length - 1] = a;\n    let b = queryParams.join('&');\n    let url = urlSplit[0] + '?' + b;\n    getMovies(url);\n  }\n}\n\nfunction addMovieToLibrary(key, movie) {\n  const libraryItems = localStorage.getItem(key);\n\n  if (libraryItems === null) {\n    const data = [movie];\n    localStorage.setItem(key, JSON.stringify(data));\n  } else {\n    const getLocalStorage = JSON.parse(libraryItems);\n\n    if (getLocalStorage.find(m => m.id === movie.id) === undefined) {\n      getLocalStorage.push(movie);\n      localStorage.setItem(key, JSON.stringify(getLocalStorage));\n    }\n  }\n}\n"],"names":["$058be7baf2d85bd2$export$ee68baf4cb9663dc","id","name","$089c40fcbb903d20$var$API_KEY","$089c40fcbb903d20$var$IMG_URL","$089c40fcbb903d20$export$923ea8233b386e99","$089c40fcbb903d20$var$BASE_URL","$089c40fcbb903d20$var$main","document","querySelector","$089c40fcbb903d20$var$form","$089c40fcbb903d20$var$prev","$089c40fcbb903d20$var$current","$089c40fcbb903d20$var$next","$089c40fcbb903d20$var$currentPage","$089c40fcbb903d20$var$nextPage","$089c40fcbb903d20$var$prevPage","$089c40fcbb903d20$var$lastUrl","$089c40fcbb903d20$var$totalPages","$089c40fcbb903d20$export$60e1c8f5f122c5ac","url","fetch","then","res","json","data","innerHTML","forEach","movie","title","overview","vote_average","vote_count","genre_ids","popularity","release_date","original_title","poster_path","movieEl","createElement","classList","add","vote","genreNames","filter","g","indexOf","map","a","movieBox","concat","join","slice","modal","Math","round","toLocaleString","appendChild","getElementById","addEventListener","style","display","overflow","$089c40fcbb903d20$var$addMovieToLibrary","$089c40fcbb903d20$export$ee74f1750741a03b","results","page","console","log","total_pages","innerText","remove","scrollIntoView","behavior","$089c40fcbb903d20$var$pageCall","urlSplit","split","queryParams","key","length","toString","b","libraryItems","localStorage","getItem","setItem","JSON","stringify","getLocalStorage","parse","undefined","find","m","push","e","preventDefault","searchTerm","value","$089c40fcbb903d20$var$searchURL"],"version":3,"file":"index.a767bd49.js.map"}