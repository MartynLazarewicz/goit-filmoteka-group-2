const e=[{id:28,name:"Action"},{id:12,name:"Adventure"},{id:16,name:"Animation"},{id:35,name:"Comedy"},{id:80,name:"Crime"},{id:99,name:"Documentary"},{id:18,name:"Drama"},{id:10751,name:"Family"},{id:14,name:"Fantasy"},{id:36,name:"History"},{id:27,name:"Horror"},{id:10402,name:"Music"},{id:9648,name:"Mystery"},{id:10749,name:"Romance"},{id:878,name:"Science Fiction"},{id:10770,name:"TV Movie"},{id:53,name:"Thriller"},{id:10752,name:"War"},{id:37,name:"Western"}],t=document.querySelector("#main"),n=document.querySelector("#form");let o=document.querySelector("#prev"),i=document.querySelector("#current"),a=document.querySelector("#next"),d=1,s=2,l=3,c="",m=100;function r(n){c=n,fetch(n).then((e=>e.json())).then((n=>{!function(n){t.innerHTML="",n.forEach((n=>{const{title:o,overview:i,vote_average:a,vote_count:d,genre_ids:s,popularity:l,release_date:c,original_title:m,id:r,poster_path:u}=n,v=document.createElement("div");v.classList.add("movie");const _=e.filter((function(e){return-1!==s.indexOf(e.id)})).map((e=>e.name)),b=`\n      <button type="button" class="movie__btn" id="${r}"><img class="poster-img" src="${u?"https://image.tmdb.org/t/p/w500"+u:"https://i.pinimg.com/originals/d2/92/47/d2924780042a36811b6bd5473465f7fc.jpg"}" alt="image"></button>\n      <div class="movie__info">\n          <div class="info"><h3 class="info__title">${o}</h3>\n          </div>\n          <div class="info ">\n            <p class="info__genres-and-year">${_.join(", ")} | ${c.slice(0,4)} </p><span class="${g=a,g>=8?"green":g>=4?"orange":"red"}">${a}</span>\n          </div>\n                  \n      </div>\n      `;var g;const y=`\n      <div id="${"modal"+r}" class="modal">\n        <div class="modal-content">\n          <span id="${"close"+r}" class="close">x</span>\n          <div class="modal-content__sides">\n            \n          <div class="modal-content__img">\n                    <img src="${u?"https://image.tmdb.org/t/p/w500"+u:"https://i.pinimg.com/originals/d2/92/47/d2924780042a36811b6bd5473465f7fc.jpg"}" alt="image"></div>\n\n          <div class="modal-content__right-side">\n          <h2 class="modal-content__title">${o}</h2>\n          <div class="modal-content__items">\n            <p class="modal-content__items--vote">${a} / ${d}</p>\n            <p class="modal-content__items--popularity">${Math.round(l).toLocaleString()}</p>\n            <p class="modal-content__items--title">${m}</p>\n            <p class="modal-content__items--genre">${_[0]}</p>\n          </div>\n          <h3 class="modal-content__about">About</h3>\n          <p class="modal-content__description">${i}</p>\n          <div class="modal-content__buttons">\n            <button type="button" class="modal-content__buttons--add-to-watched">ADD TO WATCHED</button>\n            <button type="button" class="modal-content__buttons--add-to-queue">ADD TO QUEUE</button>\n          </div>\n          </div>\n        </div>\n        </div>\n      </div>\n      `;v.innerHTML=b+y,t.appendChild(v),document.getElementById(r).addEventListener("click",(()=>{document.getElementById("modal"+r).style.display="block",document.querySelector("body").style.overflow="hidden"})),document.getElementById("close"+r).addEventListener("click",(()=>{document.getElementById("modal"+r).style.display="none",document.querySelector("body").style.overflow="visible"}));document.querySelector(`#modal${r} .modal-content__buttons--add-to-watched`).addEventListener("click",(()=>{p("libraryWatched",n)}));document.querySelector(`#modal${r} .modal-content__buttons--add-to-queue`).addEventListener("click",(()=>{p("libraryQueue",n)}))}))}(n.results),d=n.page,console.log(d),s=n.page+1,console.log(s),l=n.page-1,m=n.total_pages,i.innerText=d,d<=1?(o.classList.add("disabled"),a.classList.remove("disabled")):d>=m?(o.classList.remove("disabled"),a.classList.add("disabled")):(o.classList.remove("disabled"),a.classList.remove("disabled")),t.scrollIntoView({behavior:"smooth"})}))}function u(e){let t=c.split("?"),n=t[1].split("?"),o=n[n.length-1].split("=");if("page"!==o[0]){r(c+"&page="+e)}else{o[1]=e.toString();let i=o.join("=");n[n.length-1]=i;let a=n.join("&");r(t[0]+"?"+a)}}function p(e,t){const n=localStorage.getItem(e);if(null===n){const n=[t];localStorage.setItem(e,JSON.stringify(n))}else{const o=JSON.parse(n);void 0===o.find((e=>e.id===t.id))&&(o.push(t),localStorage.setItem(e,JSON.stringify(o)))}}r("https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=d2b5af87a64d923fbc9cd42aa4272fb1"),n.addEventListener("submit",(e=>{e.preventDefault();const t=document.querySelector("input").value;u(l),r(t?"https://api.themoviedb.org/3/search/movie?api_key=d2b5af87a64d923fbc9cd42aa4272fb1&query="+t:"https://api.themoviedb.org/3/discover/movie?sort_by=popularity.desc&api_key=d2b5af87a64d923fbc9cd42aa4272fb1")})),o.addEventListener("click",(()=>{l>0&&u(i)})),a.addEventListener("click",(()=>{s<=m&&u(s)}));
//# sourceMappingURL=index.a8957494.js.map
